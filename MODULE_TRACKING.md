# Generated Terraform Modules Tracking

This file tracks all Terraform modules that have been generated by the AVM Terraform Module Creator agent.

## Module Registry

| Module Name | Organization | Repository URL | Status | Date Created |
|-------------|--------------|----------------|--------|--------------|
| terraform-azurerm-resource-group | nathlan | https://github.com/nathlan/terraform-azurerm-resource-group | ✅ Active | 2026-02-05 |
| terraform-azurerm-storage-account | nathlan | https://github.com/nathlan/terraform-azurerm-storage-account | ✅ Active | 2026-02-05 |
| terraform-azurerm-landing-zone-vending | nathlan | https://github.com/nathlan/terraform-azurerm-landing-zone-vending | ✅ Active | 2026-02-05 |
| terraform-azurerm-firewall | nathlan | https://github.com/nathlan/terraform-azurerm-firewall | ✅ Active | 2026-02-05 |

## Module Details

### terraform-azurerm-resource-group
- **Purpose**: Azure Resource Group module (recreated version with validated agent workflow)
- **Type**: Simple resource module
- **Submodules**: None
- **AVM Consumed**: `Azure/avm-res-resources-resourcegroup/azurerm` version `~> 0.2.2`
- **Latest Release**: v1.0.0 (pending merge)
- **Features**:
  - Resource group creation with comprehensive input validation
  - Location validation restricting to australiaeast or australiacentral
  - Support for resource locks (CanNotDelete, ReadOnly)
  - Support for role assignments with conditions
  - Telemetry control
  - Automated release workflow for semantic versioning
  - Complete terraform-docs generated documentation

### terraform-azurerm-storage-account
- **Purpose**: Azure Storage Account with support for all storage types
- **Type**: Parent-child module structure
- **Submodules**:
  - `modules/blob` - Opinionated blob storage with secure defaults and region restrictions
- **Features**:
  - Generic parent storage account module supporting blob, file, queue, and table storage
  - Blob submodule with secure defaults (private access, TLS 1.2, versioning, soft delete)
  - Location validation locked to australiaeast or australiasoutheast

### terraform-azurerm-landing-zone-vending
- **Purpose**: Azure Landing Zone Subscription Vending wrapper module
- **Type**: Simple wrapper module
- **Submodules**: None
- **AVM Consumed**: `Azure/avm-ptn-alz-sub-vending/azure` version `0.1.0`
- **Latest Release**: v0.1.0 (pending merge - https://github.com/nathlan/terraform-azurerm-landing-zone-vending/pull/1)
- **Features**:
  - Simplified interface for subscription vending
  - Support for subscription alias creation and management group association
  - Resource group creation and role assignments
  - Virtual network deployment with hub peering and mesh connectivity
  - Automated release workflow for semantic versioning
  - Complete terraform-docs generated documentation

### terraform-azurerm-firewall
- **Purpose**: Azure Firewall module with opinionated defaults for Australian regions
- **Type**: Simple resource module
- **Submodules**: None
- **AVM Consumed**: `Azure/avm-res-network-azurefirewall/azurerm` version `~> 0.4.0`
- **Latest Release**: v0.1.0 (merged)
- **Latest PR**: v0.2.0 (pending - https://github.com/nathlan/terraform-azurerm-firewall/pull/2) - Adds missing files
- **Features**:
  - Support for both AZFW_VNet and AZFW_Hub SKU types
  - Location validation restricting to australiaeast or australiasoutheast
  - Support for Basic, Standard, and Premium SKU tiers
  - Integration with Azure Firewall Policy
  - Availability zones support
  - Resource locks and role assignments
  - Automated release workflow with initial version 0.1.0
  - Complete terraform-docs generated documentation
  - Configuration files (.checkov.yaml, .tflint.hcl, .terraform-docs.yml)
  - Examples directory with basic usage example

## Notes

- All modules wrap Azure Verified Modules (AVM)
- Documentation is generated using `terraform-docs`
- Modules follow HashiCorp standard structure
- Submodules are used for resources with child types
- All modules include automated release workflows for semantic versioning
- Releases are created automatically on merge using conventional commits
- **Release workflow configuration**: Use `dexwritescode/release-on-merge-action@v1` with `initial-version: '0.1.0'` for initial releases (not 1.0.0)

## Lessons Learned

### Firewall Module Initial Creation (2026-02-05)
**Issue**: PR #1 was merged with incomplete files. The PR description stated "Additional files (will be pushed shortly)" but they were never added, resulting in:
- Missing `.checkov.yaml`, `.tflint.hcl`, `.terraform-docs.yml` configuration files
- Missing `examples/` directory
- Incomplete README without terraform-docs markers

**Resolution**: Created PR #2 to add all missing files and bring module into compliance with HashiCorp standard structure.

**Prevention**: 
- **NEVER** merge PRs with incomplete files or "will be pushed shortly" notes
- **ALWAYS** include ALL required files in the initial PR:
  - Configuration files: `.checkov.yaml`, `.tflint.hcl`, `.terraform-docs.yml`
  - Complete README with terraform-docs markers
  - At least one example in `examples/basic/` directory
  - All files must be present BEFORE marking PR as ready for review
- Use the PR creation workflow: Create as draft → Push all files → Validate → Mark as ready
- The agent should validate the complete module structure before marking any PR as ready
