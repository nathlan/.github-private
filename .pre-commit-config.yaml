# Pre-commit hooks for .github-private repository
# Prevents committing files that should never be in this repo

repos:
  - repo: local
    hooks:
      # Prevent committing Terraform files
      - id: no-terraform-files
        name: Block Terraform files (.tf)
        entry: Terraform files (.tf) should not be committed to .github-private repo
        language: fail
        files: '\.tf$'
        
      # Prevent committing binaries and archives
      - id: no-binaries
        name: Block binary and archive files
        entry: Binary/archive files should not be committed to .github-private repo
        language: fail
        files: '\.(tar|gz|zip|bin|exe|dll|so|dylib)$'
        
      # Prevent modifying LICENSE (unless explicitly requested)
      - id: protect-license
        name: Protect LICENSE file
        entry: LICENSE should not be modified (add to .gitignore if needed)
        language: fail
        files: '^LICENSE$'
        
      # Prevent modifying README.md (unless explicitly requested)
      - id: protect-readme
        name: Protect README.md file
        entry: README.md should not be modified (add to .gitignore if needed)
        language: fail
        files: '^README\.md$'
        
      # Ensure only approved file types are committed
      - id: approved-files-only
        name: Only approved files
        entry: Only MODULE_TRACKING.md, agents/*.md, templates, and config files allowed
        language: fail
        files: '^(?!MODULE_TRACKING\.md$|agents/.*\.agent\.md$|agents/.*\.md$|\.checkov\.yml\.template$|\.tflint\.hcl\.template$|\.terraform-docs\.yml$|\.gitignore$|\.github/.*$).*$'
        exclude: '^(MODULE_TRACKING\.md|agents/.*\.agent\.md|agents/.*\.md|\.checkov\.yml\.template|\.tflint\.hcl\.template|\.terraform-docs\.yml|\.gitignore|\.github/.*|\.pre-commit-config\.yaml)$'
